{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\emili\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\volonters\\\\frontend\\\\src\\\\components\\\\Navbar.js\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport './Navbar.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Navbar({\n  user,\n  onLogout\n}) {\n  _s();\n  const [unreadCount, setUnreadCount] = useState(0);\n  useEffect(() => {\n    if (user) {\n      fetchUnreadCount();\n      // Опрашиваем каждые 30 секунд\n      const interval = setInterval(fetchUnreadCount, 30000);\n      return () => clearInterval(interval);\n    }\n  }, [user]);\n  const fetchUnreadCount = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await axios.get('http://localhost:3000/api/messages/unread-count', {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      setUnreadCount(response.data.unreadCount);\n    } catch (error) {\n      console.error('Ошибка при загрузке непрочитанных сообщений:', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"nav\", {\n    className: \"navbar\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"navbar-left\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"navbar-brand\",\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/\",\n          children: \"\\u0412\\u043E\\u043B\\u043E\\u043D\\u0442\\u0435\\u0440\\u0441\\u043A\\u0438\\u0435 \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 32,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 9\n      }, this), user && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-welcome-nav\",\n        children: [\"\\u041F\\u0440\\u0438\\u0432\\u0435\\u0442, \", user.firstName, \"!\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"navbar-links\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        to: \"/\",\n        children: \"\\u0412\\u0441\\u0435 \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 9\n      }, this), user ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [user.role === 'organizer' && /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/create-project\",\n          children: \"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/my-applications\",\n          children: \"\\u041C\\u043E\\u0438 \\u0437\\u0430\\u044F\\u0432\\u043A\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/profile\",\n          children: \"\\u041B\\u0438\\u0447\\u043D\\u044B\\u0439 \\u043A\\u0430\\u0431\\u0438\\u043D\\u0435\\u0442\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onLogout,\n          className: \"logout-btn\",\n          children: \"\\u0412\\u044B\\u0439\\u0442\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: \"/login\",\n          children: \"\\u0412\\u043E\\u0439\\u0442\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/register\",\n          children: \"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 29,\n    columnNumber: 5\n  }, this);\n}\n_s(Navbar, \"kbkQyZcWntSU4g4UPMkVP4HEso8=\");\n_c = Navbar;\nexport default Navbar;\nvar _c;\n$RefreshReg$(_c, \"Navbar\");","map":{"version":3,"names":["React","Link","jsxDEV","_jsxDEV","Fragment","_Fragment","Navbar","user","onLogout","_s","unreadCount","setUnreadCount","useState","useEffect","fetchUnreadCount","interval","setInterval","clearInterval","token","localStorage","getItem","response","axios","get","headers","data","error","console","className","children","to","fileName","_jsxFileName","lineNumber","columnNumber","firstName","role","onClick","_c","$RefreshReg$"],"sources":["C:/Users/emili/OneDrive/Рабочий стол/volonters/frontend/src/components/Navbar.js"],"sourcesContent":["import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport './Navbar.css';\r\n\r\nfunction Navbar({ user, onLogout }) {\r\n  const [unreadCount, setUnreadCount] = useState(0);\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      fetchUnreadCount();\r\n      // Опрашиваем каждые 30 секунд\r\n      const interval = setInterval(fetchUnreadCount, 30000);\r\n      return () => clearInterval(interval);\r\n    }\r\n  }, [user]);\r\n\r\n  const fetchUnreadCount = async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      const response = await axios.get('http://localhost:3000/api/messages/unread-count', {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n      setUnreadCount(response.data.unreadCount);\r\n    } catch (error) {\r\n      console.error('Ошибка при загрузке непрочитанных сообщений:', error);\r\n    }\r\n  };\r\n  return (\r\n    <nav className=\"navbar\">\r\n      <div className=\"navbar-left\">\r\n        <div className=\"navbar-brand\">\r\n          <Link to=\"/\">Волонтерские проекты</Link>\r\n        </div>\r\n        {user && (\r\n          <div className=\"user-welcome-nav\">\r\n            Привет, {user.firstName}!\r\n          </div>\r\n        )}\r\n      </div>\r\n      \r\n      <div className=\"navbar-links\">\r\n        <Link to=\"/\">Все проекты</Link>\r\n        {user ? (\r\n          <>\r\n            {user.role === 'organizer' && (\r\n              <Link to=\"/create-project\">Создать проект</Link>\r\n            )}\r\n            <Link to=\"/my-applications\">Мои заявки</Link>\r\n            <Link to=\"/profile\">Личный кабинет</Link>\r\n            <button onClick={onLogout} className=\"logout-btn\">Выйти</button>\r\n          </>\r\n        ) : (\r\n          <>\r\n            <Link to=\"/login\">Войти</Link>\r\n            <Link to=\"/register\">Регистрация</Link>\r\n          </>\r\n        )}\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n\r\nexport default Navbar;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}