{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\emili\\\\OneDrive\\\\\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B\\\\volonters\\\\frontend\\\\src\\\\components\\\\Navbar.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport './Navbar.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Navbar({\n  user,\n  onLogout\n}) {\n  _s();\n  const [unreadCount, setUnreadCount] = useState(0);\n  useEffect(() => {\n    if (user) {\n      fetchUnreadCount();\n      const interval = setInterval(fetchUnreadCount, 30000);\n      return () => clearInterval(interval);\n    } else {\n      // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã—à–µ–ª, —Å–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫\n      setUnreadCount(0);\n    }\n  }, [user]);\n  const fetchUnreadCount = async () => {\n    try {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        setUnreadCount(0);\n        return;\n      }\n      const response = await axios.get('http://localhost:3000/api/messages/unread-count', {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      setUnreadCount(response.data.unreadCount);\n    } catch (error) {\n      console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π:', error);\n      setUnreadCount(0);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"nav\", {\n    className: \"navbar\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"navbar-left\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"navbar-brand\",\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/\",\n          children: \"\\u0412\\u043E\\u043B\\u043E\\u043D\\u0442\\u0435\\u0440\\u0441\\u043A\\u0438\\u0435 \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }, this), user && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-welcome-nav\",\n        children: [\"\\u041F\\u0440\\u0438\\u0432\\u0435\\u0442, \", user.firstName, \"!\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"navbar-links\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        to: \"/\",\n        children: \"\\u0412\\u0441\\u0435 \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this), user ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [user.role === 'organizer' && /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/create-project\",\n          children: \"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/my-applications\",\n          children: \"\\u041C\\u043E\\u0438 \\u0437\\u0430\\u044F\\u0432\\u043A\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/profile\",\n          children: \"\\u041B\\u0438\\u0447\\u043D\\u044B\\u0439 \\u043A\\u0430\\u0431\\u0438\\u043D\\u0435\\u0442\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/chat\",\n          className: \"chat-link\",\n          children: [\"\\uD83D\\uDCAC \\u0421\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u044F\", unreadCount > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"unread-indicator\",\n            children: unreadCount\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onLogout,\n          className: \"logout-btn\",\n          children: \"\\u0412\\u044B\\u0439\\u0442\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: \"/login\",\n          children: \"\\u0412\\u043E\\u0439\\u0442\\u0438\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/register\",\n          children: \"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 5\n  }, this);\n}\n_s(Navbar, \"kbkQyZcWntSU4g4UPMkVP4HEso8=\");\n_c = Navbar;\nexport default Navbar;\nvar _c;\n$RefreshReg$(_c, \"Navbar\");","map":{"version":3,"names":["React","useState","useEffect","Link","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","Navbar","user","onLogout","_s","unreadCount","setUnreadCount","fetchUnreadCount","interval","setInterval","clearInterval","token","localStorage","getItem","response","get","headers","data","error","console","className","children","to","fileName","_jsxFileName","lineNumber","columnNumber","firstName","role","onClick","_c","$RefreshReg$"],"sources":["C:/Users/emili/OneDrive/–†–∞–±–æ—á–∏–π —Å—Ç–æ–ª/volonters/frontend/src/components/Navbar.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport './Navbar.css';\r\n\r\nfunction Navbar({ user, onLogout }) {\r\n  const [unreadCount, setUnreadCount] = useState(0);\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      fetchUnreadCount();\r\n      const interval = setInterval(fetchUnreadCount, 30000);\r\n      return () => clearInterval(interval);\r\n    } else {\r\n      // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã—à–µ–ª, —Å–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫\r\n      setUnreadCount(0);\r\n    }\r\n  }, [user]);\r\n\r\n  const fetchUnreadCount = async () => {\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      if (!token) {\r\n        setUnreadCount(0);\r\n        return;\r\n      }\r\n\r\n      const response = await axios.get('http://localhost:3000/api/messages/unread-count', {\r\n        headers: { 'Authorization': `Bearer ${token}` }\r\n      });\r\n      setUnreadCount(response.data.unreadCount);\r\n    } catch (error) {\r\n      console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π:', error);\r\n      setUnreadCount(0);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <nav className=\"navbar\">\r\n      <div className=\"navbar-left\">\r\n        <div className=\"navbar-brand\">\r\n          <Link to=\"/\">–í–æ–ª–æ–Ω—Ç–µ—Ä—Å–∫–∏–µ –ø—Ä–æ–µ–∫—Ç—ã</Link>\r\n        </div>\r\n        {user && (\r\n          <div className=\"user-welcome-nav\">\r\n            –ü—Ä–∏–≤–µ—Ç, {user.firstName}!\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"navbar-links\">\r\n        <Link to=\"/\">–í—Å–µ –ø—Ä–æ–µ–∫—Ç—ã</Link>\r\n        {user ? (\r\n          <>\r\n            {user.role === 'organizer' && (\r\n              <Link to=\"/create-project\">–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç</Link>\r\n            )}\r\n            <Link to=\"/my-applications\">–ú–æ–∏ –∑–∞—è–≤–∫–∏</Link>\r\n            <Link to=\"/profile\">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</Link>\r\n            \r\n            {/* –°—Å—ã–ª–∫–∞ –Ω–∞ —á–∞—Ç —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö */}\r\n            <Link to=\"/chat\" className=\"chat-link\">\r\n              üí¨ –°–æ–æ–±—â–µ–Ω–∏—è\r\n              {unreadCount > 0 && (\r\n                <span className=\"unread-indicator\">{unreadCount}</span>\r\n              )}\r\n            </Link>\r\n            \r\n            <button onClick={onLogout} className=\"logout-btn\">–í—ã–π—Ç–∏</button>\r\n          </>\r\n        ) : (\r\n          <>\r\n            <Link to=\"/login\">–í–æ–π—Ç–∏</Link>\r\n            <Link to=\"/register\">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</Link>\r\n          </>\r\n        )}\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n\r\nexport default Navbar;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}